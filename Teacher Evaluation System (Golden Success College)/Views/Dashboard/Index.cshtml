@model IEnumerable<Teacher_Evaluation_System__Golden_Success_College_.Models.Teacher>?

@{
    Layout = "_Layoutadmin";

    string role = User.FindFirst("RoleName")?.Value ?? "";
}

@if (role == "Admin" || role == "Super Admin")
{
    <!-- ADMIN / SUPER ADMIN DASHBOARD -->
    <h2 class="mb-4">Admin Dashboard</h2>

    <div class="row">
        <div class="col-md-4">
            <div class="card shadow p-3">
                <h5>Total Teachers</h5>
                <h2>@ViewBag.TotalTeachers</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow p-3">
                <h5>Total Students</h5>
                <h2>@ViewBag.TotalStudents</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow p-3">
                <h5>Total Evaluations</h5>
                <h2>@ViewBag.TotalEvaluations</h2>
            </div>
        </div>
    </div>
}
else if (role == "Student")
{
    <!-- STUDENT DASHBOARD -->
    <h2 class="mb-4">Teacher Evaluation</h2>

    <div class="row">
        @foreach (var teacher in Model!)
        {
            <div class="col-md-4 mb-4">
                <div class="card shadow p-3">
                    <img src="@teacher.PicturePath" class="img-fluid rounded mb-2" />

                    <h5>@teacher.FullName</h5>
                    <p class="text-muted">@teacher.Department</p>

                    <p><strong>Level:</strong> @teacher.Level?.LevelName</p>

                    <a asp-controller="TeacherEvaluations"
                       asp-action="Create"
                       asp-route-id="@teacher.TeacherId"
                       class="btn btn-primary w-100">
                        Evaluate Teacher
                    </a>
                </div>
            </div>
        }
    </div>
}
